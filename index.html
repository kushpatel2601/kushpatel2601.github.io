<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RNG PATEL INSTITUTE OF TECHNOLOGY - Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <style>
    /* Reset & base */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #7f00ff 0%, #e100ff 100%);
      color: #1e293b;
      min-height: 100vh;
      display: block;
      padding: 0 1rem 4rem;
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased; /* Ensures smooth rendering on Webkit browsers */
      -moz-osx-font-smoothing: grayscale; /* Ensures smooth rendering on Firefox (macOS) */
      text-rendering: optimizeLegibility; /* Prioritizes legibility for all text */
    }
    a {
      color: #7c3aed;
      text-decoration: none;
      transition: color 0.3s ease, text-decoration 0.3s ease;
    }
    a:hover,
    a:focus {
      color: #5b21b6;
      text-decoration: underline;
      outline: none;
    }
    h1, h2 {
      font-weight: 700;
      margin: 0;
      color: white;
      /* Removed -webkit-text-stroke to ensure perfect letter smoothness */
    }
    h1 {
      font-size: 3rem;
      line-height: 1.1;
      margin-bottom: 0.4rem;
      text-shadow: 0 4px 6px rgba(0,0,0,0.15);
    }
    h2 {
      font-size: 1.875rem;
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
    label {
      font-weight: 600;
      font-size: 1.1rem;
      color: #ddd6fe;
      margin-bottom: 0.75rem;
      display: block;
      text-align: center;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    select, input[type="search"] {
      width: 100%;
      max-width: 400px;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      border-radius: 16px;
      border: none;
      background: #ede9fe;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.25);
      font-weight: 600;
      color: #4c1d95;
      cursor: pointer;
      transition: box-shadow 0.35s ease, background 0.35s ease;
      margin-left: auto;
      margin-right: auto;
      display: block;
    }
    select:hover,
    input[type="search"]:hover,
    input[type="search"]:focus {
      outline: none;
      background: white;
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.5);
      color: #5b21b6;
    }

    /* College Header Styles */
    .college-header {
      width: 100%;
      padding: 2.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      overflow: hidden;
      min-height: 280px;
      color: white;
      text-shadow: 0 2px 5px rgba(0,0,0,0.5);
      background: url('RNGPITPHOTO.png') no-repeat center center / cover;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      animation: fadeIn 1.5s ease-out;
      border-bottom-left-radius: 30px;
      border-bottom-right-radius: 30px;
      margin-bottom: 3rem;
    }
    .college-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, rgba(74, 20, 140, 0.7) 0%, rgba(127, 0, 255, 0.4) 100%);
      z-index: 1;
    }
    .college-header > * {
      z-index: 2;
      position: relative;
    }
    .header-content {
      flex-grow: 1;
      max-width: 70%;
    }
    .college-name {
      font-size: 3.8rem;
      font-weight: 800;
      margin-bottom: 0.8rem;
      line-height: 1.1;
      /* Removed -webkit-text-stroke to ensure perfect letter smoothness */
      color: white;
    }
    .college-slogan {
      font-size: 1.6rem;
      font-weight: 500;
      max-width: 600px;
      line-height: 1.4;
      color: #e0e0e0;
    }
    .college-logo-container {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      flex-shrink: 0;
    }
    .college-logo {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      border: 6px solid white;
      box-shadow: 0 0 25px rgba(0,0,0,0.5), 0 0 0 8px rgba(255,255,255,0.2);
      object-fit: cover;
      transition: transform 0.4s ease-in-out, box-shadow 0.4s ease;
    }
    .college-logo:hover {
      transform: scale(1.08) rotate(5deg);
      box-shadow: 0 0 35px rgba(0,0,0,0.7), 0 0 0 10px rgba(255,255,255,0.3);
    }

    /* Hero section */
    .hero {
      width: 100%;
      max-width: 900px;
      margin-top: 3rem;
      margin-bottom: 3rem;
      background: linear-gradient(160deg, #7f00ff, #e100ff);
      border-radius: 24px;
      position: relative;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      padding: 2.5rem 2rem 2.5rem 2.5rem;
      box-shadow: 0 8px 24px rgba(124, 58, 237, 0.6);
      overflow: hidden;
      margin-left: auto;
      margin-right: auto;
    }
    .hero-text {
      flex: 1 1 480px;
      color: white;
      z-index: 2;
    }
    .hero-text h1 {
      font-size: 3.6rem;
      max-width: 14ch;
      margin-bottom: 1rem;
      animation: slideInFromLeft 1.2s ease forwards;
    }
    .hero-text p {
      font-size: 1.2rem;
      max-width: 420px;
      line-height: 1.5;
      color: #dcd6fecc;
      margin-bottom: 2rem;
      animation: slideInFromLeft 1.4s ease forwards;
    }
    .hero-image-container {
      flex: 1 1 360px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: 1;
      animation: slideInFromRight 1.5s ease forwards;
    }
    .hero-image-container img {
      max-width: 100%;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(124, 58, 237, 0.8);
      filter: drop-shadow(0 0 8px #9d7effaa);
      transition: transform 0.3s ease;
    }
    .hero-image-container img:hover {
      transform: scale(1.05) rotate(2deg);
    }

    /* Animated background blobs behind hero */
    .blob-1, .blob-2 {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      mix-blend-mode: screen;
      animation: blobMove 15s infinite alternate ease-in-out;
      pointer-events: none;
      user-select: none;
      z-index: 0;
    }
    .blob-1 {
      width: 380px;
      height: 380px;
      background: #a78bfa;
      top: -120px;
      left: -110px;
      animation-delay: 0s;
    }
    .blob-2 {
      width: 300px;
      height: 300px;
      background: #c084fc;
      bottom: -110px;
      right: -90px;
      animation-delay: 6s;
    }

    /* Toggle buttons for sections */
    #sectionToggleContainer {
      display: flex; /* Use flexbox for button layout */
      justify-content: center;
      flex-wrap: wrap; /* Allow wrapping on smaller screens */
      gap: 1rem; /* Space between buttons */
      margin-bottom: 2rem;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    .toggle-section-btn {
      background: #7c3aed;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 700;
      border-radius: 16px;
      padding: 0.75rem 1.5rem; /* Adjusted padding for better fit */
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.25);
      transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
      flex-shrink: 0; /* Prevent buttons from shrinking too much */
    }
    .toggle-section-btn:hover {
      background-color: #5b21b6;
      box-shadow: 0 8px 24px rgba(124, 58, 237, 0.7);
      transform: translateY(-2px);
    }
    .toggle-section-btn.active {
      background-color: #5b21b6;
      box-shadow: 0 10px 30px rgba(91, 33, 182, 0.8);
      cursor: default;
      transform: translateY(0); /* Reset transform for active state */
    }

    /* Semester button container */
    #semesterButtonsContainer {
      margin-top: 1rem;
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      flex-wrap: wrap;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    .semester-btn {
      background: #ede9fe;
      color: #7c3aed;
      border: none;
      cursor: pointer;
      font-weight: 700;
      border-radius: 16px;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.25);
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    .semester-btn:hover,
    .semester-btn:focus {
      background-color: #7c3aed;
      color: white;
      outline: none;
      box-shadow: 0 8px 24px rgba(124, 58, 237, 0.7);
    }
    .semester-btn.active {
      background-color: #5b21b6;
      color: white;
      box-shadow: 0 10px 30px rgba(91, 33, 182, 0.8);
      cursor: default;
    }

    /* Subject container */
    #subjectsContainer {
      width: 100%;
      max-width: 900px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem 2rem;
      margin-top: 2rem;
      margin-left: auto;
      margin-right: auto;
    }
    .subject-card {
      background: #ede9fe;
      border-radius: 20px;
      box-shadow: 0 4px 14px rgba(124, 58, 237, 0.3);
      padding: 1.2rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      user-select: none;
      transition: box-shadow 0.35s ease, transform 0.3s ease;
    }
    .subject-card:hover,
    .subject-card:focus-within {
      box-shadow: 0 14px 32px rgba(124, 58, 237, 0.7);
      transform: translateY(-4px);
      outline: none;
    }
    .subject-title {
      font-weight: 700;
      font-size: 1.25rem;
      color: #5b21b6;
      margin: 0;
      cursor: default;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      user-select: text;
      text-shadow: 0 1px 1px rgba(0,0,0,0.1);
    }
    .material-icons.subject-icon {
      color: #7c3aed;
      font-size: 26px;
    }
    ul.papers-list { /* This class is now used for both papers and materials */
      list-style: none;
      padding-left: 1.25rem;
      margin: 0;
      max-height: 160px;
      overflow-y: auto;
    }
    ul.papers-list li {
      margin-bottom: 0.45rem;
    }
    ul.papers-list li a {
      color: #6d28d9;
      font-weight: 700;
      text-decoration: none;
      font-size: 1rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      border-radius: 10px;
      padding: 0.25rem 0.7rem;
      user-select: text;
      transition: background-color 0.3s ease;
    }
    ul.papers-list li a:hover,
    ul.papers-list li a:focus {
      background-color: #d8b4fe;
      color: #4c1d95;
      outline: none;
      text-decoration: underline;
    }
    ul.papers-list li a .material-icons.link-icon {
      font-size: 18px;
    }

    /* Empty message */
    #emptyMessage {
      color: #ddd6fecc;
      font-style: italic;
      text-align: center;
      font-size: 1.125rem;
      margin-top: 3rem;
      user-select: none;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Accessibility focus ring */
    a:focus-visible,
    button:focus-visible,
    select:focus-visible,
    input:focus-visible {
      outline: 3px solid #a78bfa;
      outline-offset: 3px;
      border-color: #a78bfa;
      box-shadow: 0 0 10px #c4b5fd;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .college-header {
        flex-direction: column;
        text-align: center;
        padding: 1.5rem 1rem;
        min-height: 200px;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
      }
      .header-content {
        max-width: 100%;
        margin-bottom: 1rem;
      }
      .college-name {
        font-size: 2.8rem;
      }
      .college-slogan {
        font-size: 1.3rem;
      }
      .college-logo-container {
        margin-top: 1rem;
      }
      .college-logo {
        width: 140px;
        height: 140px;
        border-width: 5px;
      }
      .hero {
        padding: 2rem 1.5rem;
      }
      .hero-text h1 {
        font-size: 3rem;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 0 0.75rem 3rem;
      }
      .college-header {
        padding: 1rem 0.5rem;
        min-height: 180px;
        border-bottom-left-radius: 15px;
        border-bottom-right-radius: 15px;
      }
      .college-name {
      font-size: 3.8rem;
      font-weight: 800;
      margin-bottom: 0.8rem;
      line-height: 1.1;
      color: white;
      }
      .college-slogan {
        font-size: 1.1rem;
      }
      .college-logo {
        width: 100px;
        height: 100px;
        border-width: 4px;
      }
      .hero {
        flex-direction: column;
        border-radius: 20px;
        padding: 1.5rem;
        margin-top: 2rem;
      }
      .hero-text, .hero-image-container {
        flex: none;
        width: 100%;
        margin-bottom: 1.75rem;
        text-align: center;
      }
      h1 {
        font-size: 2.4rem;
      }
      #subjectsContainer {
        grid-template-columns: 1fr;
        margin-top: 1rem;
      }
      #semesterButtonsContainer {
        flex-direction: column;
        max-width: 280px;
        margin: 1rem auto 0;
      }
      .semester-btn {
        font-size: 1.1rem;
        padding: 0.75rem 1.5rem;
      }
      .toggle-section-btn {
        margin: 0.5rem 0.25rem; /* Adjust margin for smaller screens */
        padding: 0.6rem 1.5rem;
        font-size: 0.95rem;
      }
    }

    /* Animations */
    @keyframes slideInFromLeft {
      0% {
        transform: translateX(-30px);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes slideInFromRight {
      0% {
        transform: translateX(40px);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes blobMove {
      0%, 100% {
        transform: translate3d(0,0,0) scale(1);
      }
      50% {
        transform: translate3d(20px,-20px,0) scale(1.1);
      }
    }
    /* New animation for header fade-in */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Department Assignment Buttons Container */
    #departmentAssignmentButtonsContainer {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 2rem;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }

    /* Styling for "View Assignments" buttons (reusing semester-btn style) */
    .department-assignment-btn {
        background: #ede9fe;
        color: #7c3aed;
        border: none;
        cursor: pointer;
        font-weight: 700;
        border-radius: 16px;
        padding: 0.75rem 2rem;
        font-size: 1rem;
        box-shadow: 0 4px 12px rgba(124, 58, 237, 0.25);
        transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
        user-select: none;
    }
    .department-assignment-btn:hover,
    .department-assignment-btn:focus {
        background-color: #7c3aed;
        color: white;
        outline: none;
        box-shadow: 0 8px 24px rgba(124, 58, 237, 0.7);
    }
  </style>
</head>
<body>
  <header class="college-header" role="banner">
    <div class="header-content">
      <h1 class="college-name">RNG PATEL INSTITUTE OF TECHNOLOGY</h1>
      <p class="college-slogan">Taking you to Tomorrow's Technology</p>
    </div>
    <div class="college-logo-container">
      <img src="RNGPIT_logo.png" alt="Tech Academy College Logo" class="college-logo">
    </div>
  </header>

  <section class="hero" aria-label="Welcome section with hero image and title">
    <div class="hero-text">
      <h1>Explore Our Resources</h1>
      <p>Your gateway to comprehensive question papers and essential study materials for every subject across departments in your college. Find, download, and excel.</p>
    </div>
    <div class="hero-image-container">
      <img
        src="RNGPITPHOTO.png"
        alt="Modern illustration showing students studying with books and laptop, colorful gradient style"
        width="400"
        height="300"
        loading="lazy"
        />
    </div>
    <div class="blob-1" aria-hidden="true"></div>
    <div class="blob-2" aria-hidden="true"></div>
  </section>

  <div id="sectionToggleContainer" style="text-align: center; margin-bottom: 2rem; max-width: 900px; margin-left: auto; margin-right: auto;">
    <button id="syllabusBtn" class="toggle-section-btn">Syllabus</button>
    <button id="questionPapersBtn" class="toggle-section-btn">Question Papers</button>
    <button id="studyMaterialBtn" class="toggle-section-btn">Study Material</button>
    <button id="assignmentsBtn" class="toggle-section-btn">Assignments</button>
  </div>

  <label for="departmentSelect" id="departmentSelectLabel">Select Department</label>
  <select id="departmentSelect" aria-describedby="departmentSelectDesc" aria-label="Select Department">
    <option value="" disabled selected>Choose a department</option>
  </select>
  <div id="departmentSelectDesc" class="sr-only">
  <h4><center>After selecting a department, select semester below.</center></h4>
  </div>

  <div id="semesterButtonsContainer" aria-label="Semester selection" style="display:none;"></div>

  <label for="subjectSearch" id="subjectSearchLabel" style="display:none;">Filter Subjects</label>
  <input type="search" id="subjectSearch" placeholder="Search subjects..." aria-labelledby="subjectSearchLabel" style="display:none;" autocomplete="off" spellcheck="false" />

  <section id="subjectsContainer" aria-live="polite" aria-atomic="true" tabindex="0">
    </section>

  <!-- New container for department-specific assignment buttons -->
  <div id="departmentAssignmentButtonsContainer" style="display:none;"></div>

  <p id="emptyMessage" style="display:none;">No subjects or question papers found.</p>

  <script>
    // Helper function to create 'No data added.' entry for a subject
    function createNoDataSubject(sectionType = 'papers') {
      const defaultContent = { title: 'No data added.', url: '#' };
      if (sectionType === 'papers') {
        return { name: 'No Data Available', papers: [defaultContent] };
      } else if (sectionType === 'materials') {
        return { name: 'No Data Available', materials: [defaultContent] };
      } else if (sectionType === 'assignments') {
        return { name: 'No Data Available', isDynamicAssignmentSubject: false }; // Assignments default
      } else if (sectionType === 'syllabus') {
        return { name: 'No Data Available', syllabus: [defaultContent] };
      }
      return { name: 'No Data Available', data: [defaultContent] }; // Fallback
    }

    // Function to ensure all 8 semesters exist for a department in a given data structure
    function standardizeSemesters(dataArray, sectionType) {
      return dataArray.map(dept => {
        const newSemesters = {};
        for (let i = 1; i <= 8; i++) {
          const semesterKey = `Semester-${i}`;
          // Check if the semester already exists and has subjects
          if (dept.semesters[semesterKey] && dept.semesters[semesterKey].length > 0) {
            newSemesters[semesterKey] = dept.semesters[semesterKey];
            // If it's not 'questionPapers' section, and subjects have multiple URLs, take only the first one
            if (sectionType !== 'papers') {
              newSemesters[semesterKey] = newSemesters[semesterKey].map(subject => {
                const items = subject[sectionType];
                if (items && items.length > 1) {
                  return { ...subject, [sectionType]: [items[0]] }; // Keep only the first item
                }
                return subject;
              });
            }
          } else {
            // Default to 'No Data Available' subject if semester or its data is missing
            newSemesters[semesterKey] = [createNoDataSubject(sectionType)];
          }
        }
        return { ...dept, semesters: newSemesters };
      });
    }

    const rawQuestionPaperData = [
      {
        department: 'Information Technology',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1Z5PSUjHl6nyFsprZmzrOctZbIOskvjBs/view?usp=sharing'},
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1KClgVL79O4hieOKglP1_ZOqw74w3ABlZ/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1Zx2C0uy2PQN-pFZaJ8SYmxbwLxbIHsZE/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1OVRBrIJLZeW_NGdszfl5ePNs0XkbAl8T/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1OUxSYltuA4q3YOTDv3uKvlo2a6vNUHC9/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1OUMAv-SwJ6NViPaYWVUHM8e7RFj8hY4O/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1OSj2jYWrX4Q3FdZoUgpXOh4BVOpVW7AE/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1OYKjzJwZDYJRI8A67I-9S9Kq0jHiTEjg/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1OWMyp9fiCD4u3AuC9K9Y238x7z5ue5dJ/view?usp=sharing' },
              ],
            },
            {
              name: 'CALCULUS',
              papers: [
                { year: '2024(Mid-1)', url: 'https://example.com/IT/Calculus/2024_mid1.pdf' },
                { year: '2024(Mid-2)', url: 'https://example.com/IT/Calculus/2024_mid2.pdf' },
                { year: '2024(Final)', url: 'https://example.com/IT/Calculus/2024_final.pdf' },
              ],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1QqgrQMGEEPAX7B4-MC0jJf3XM2pLt1fw/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1RPMXxDtle8vypqalW9mLe5E3rR2_3a8h/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1w3RJBy-9wh2V2rVPjkLnHIWpq6i8T3mI/view?usp=sharing' },
              ],
            },
            { name: 'ICT ESSENTIALS', papers: [] },
            { name: 'WEB DESIGNING', papers: [] },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/17Ik-Gu42BrUaCBFNuhuLbwQpBlffR4i3/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1MawMVttdsYfNyhuETjZbsjWdNHSgV2D6/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1eF83NPpuQifFnTWuVypykfSF8lGVdRak/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF OBJECT ORIENTED PROGRAMMING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1mjvEBKMkpf8jj3g4tMqNq73YAN-076uX/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1Ap5pYP9eLU5wTsO2JQQRfpab9Tevasw2/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1tNj67867dpxrcaoX2jcx-owT6J0RsDRW/view?usp=sharing' },
              ],
            },
            {
              name: 'PYTHON FOE ENGINEERS',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1m5ETgpSIHL44Xyvd2SRR9nlzuQ3XSimf/view?usp=sharing' },
                { year: '2024(Mid-2)', url:'https://drive.google.com/file/d/14x48Er7hJsLJaPpusNBW2fKInZOVC7SH/view?usp=sharing' },
                { year: '2024(Final)', url:'https://drive.google.com/file/d/10apRhmeSakZpvlyjVjXUQHFB5oI-uPTe/view?usp=sharing' },
              ],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1ZDvXsvietETHziri4oy7t99xKEjkHs5S/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1n2WqhQfGEyLrBj1R7Ih_AB2E_XLpyP15/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1N9-mF_kOSJvGitJDAoge4HbhESZW2uZL/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/12MzG9Y-vxBtFiPPUT9dLVEHt5PiD2pHa/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1B8Aq6ZsUpFy6AiidF9g8sbo212w25grh/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1dstzfXlJpAe7QoKR0Y9FqiTr6hgJ7EWp/view?usp=sharing' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1RViSk_0KXMf_GR65DdHfeJIkAYxZkshA/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1rPkYR3ohY_oKsFj1dD3itXnQsbHvpbes/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1Lpw54bMXag2HNA_mYMUt39yPQXRy32ZF/view?usp=sharing' },
              ],
            },
          ]
        }
      },
      {
        department: 'Computer Science Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1Z5PSUjHl6nyFsprZmzrOctZbIOskvjBs/view?usp=sharing'},
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1KClgVL79O4hieOKglP1_ZOqw74w3ABlZ/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1Zx2C0uy2PQN-pFZaJ8SYmxbwLxbIHsZE/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://example.com/CSE/FEEE/2024_mid1.pdf' },
                { year: '2024(Mid-2)', url: 'https://example.com/CSE/FEEE/2024_mid2.pdf' },
                { year: '2024(Final)', url: 'https://example.com/CSE/FEEE/2024_final.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://example.com/CSE/FCP/2024_mid1.pdf' },
                { year: '2024(Mid-2)', url: 'https://example.com/CSE/FCP/2024_mid2.pdf' },
                { year: '2024(Final)', url: 'https://example.com/CSE/FCP/2024_final.pdf' },
              ],
            },
            {
              name: 'CALCULUS',
              papers: [
                { year: '2024(Mid-1)', url: 'https://example.com/CSE/Calculus/2024_mid1.pdf' },
                { year: '2024(Mid-2)', url: 'https://example.com/CSE/Calculus/2024_mid2.pdf' },
                { year: '2024(Final)', url: 'https://example.com/CSE/Calculus/2024_final.pdf' },
              ],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1QqgrQMGEEPAX7B4-MC0jJf3XM2pLt1fw/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1RPMXxDtle8vypqalW9mLe5E3rR2_3a8h/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1w3RJBy-9wh2V2rVPjkLnHIWpq6i8T3mI/view?usp=sharing' },
              ],
            },
            { name: 'ICT ESSENTIALS', papers: [] },
            { name: 'WEB DESIGNING', papers: [] },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/17Ik-Gu42BrUaCBFNuhuLbwQpBlffR4i3/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1MawMVttdsYfNyhuETjZbsjWdNHSgV2D6/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1eF83NPpuQifFnTWuVypykfSF8lGVdRak/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF OBJECT ORIENTED PROGRAMMING',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1QDklhoxSuhQC6VanA8Uc_h62XN-Su_Nj/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1Q8Mq4pJvfc6x8S03bDOmXzT2JyoM1iMn/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1Q5A9fur2J11gj6zVtA7gwFPYKdi0YIAa/view?usp=sharing' },
              ],
            },
            {
              name: 'PYTHON FOE ENGINEERS',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1QDcfeRUvTf9nP0VKx5_6oZTPxBbdXAK8/view?usp=sharing' },
                { year: '2024(Mid-2)', url:'https://drive.google.com/file/d/1QIhgI0XH4vKTM00VIfbWRWKWRjQoNOuh/view?usp=sharing' },
                { year: '2024(Final)', url:'https://drive.google.com/file/d/1Q66EeDc6MgEGSAN7Pr4-lP_lgyHOSTEA/view?usp=sharing' },
              ],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1ZDvXsvietETHziri4oy7t99xKEjkHs5S/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1n2WqhQfGEyLrBj1R7Ih_AB2E_XLpyP15/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1N9-mF_kOSJvGitJDAoge4HbhESZW2uZL/view?usp=sharing' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/12MzG9Y-vxBtFiPPUT9dLVEHt5PiD2pHa/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1B8Aq6ZsUpFy6AiidF9g8sbo212w25grh/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1dstzfXlJpAe7QoKR0Y9FqiTr6hgJ7EWp/view?usp=sharing' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              papers: [
                { year: '2024(Mid-1)', url: 'https://drive.google.com/file/d/1RViSk_0KXMf_GR65DdHfeJIkAYxZkshA/view?usp=sharing' },
                { year: '2024(Mid-2)', url: 'https://drive.google.com/file/d/1rPkYR3ohY_oKsFj1dD3itXnQsbHvpbes/view?usp=sharing' },
                { year: '2024(Final)', url: 'https://drive.google.com/file/d/1Lpw54bMXag2HNA_mYMUt39yPQXRy32ZF/view?usp=sharing' },
              ],
            },
          ]
        }
      },
      {
        department: 'Mechanical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Thermodynamics',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/Thermodynamics/2024.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'APPLIED ELECTRICAL AND ELECTRONICS ENGINEERING',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/FluidMechanics/2024.pdf' },
              ],
            },
            {
              name: 'NUMERICAL METHODS AND COMPLEX VARIABLES',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/MachineDesign/2024.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/HeatTransfer/2024.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/ManufacturingProcesses/2024.pdf' },
              ],
            },
            {
              name: 'BASICS OF THERMODYNAMICS',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/EngineeringMechanics/2024.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              papers: [
                { year: '2024', url: 'https://example.com/Mechanical/OperationsResearch/2024.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Electrical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Circuit Theory',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/CircuitTheory/2024.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'PHYSICS',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/PowerSystems/2024.pdf' },
              ],
            },
            {
              name: 'APPLIED MATHEMATICS',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/ControlSystems/2024.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/ElectricalMachines/2024.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/PowerElectronics/2024.pdf' },
              ],
            },
            {
              name: 'BASIC ELECTRONICS',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/MeasurementsAndInstrumentation/2024.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              papers: [
                { year: '2024', url: 'https://example.com/Electrical/DigitalSignalProcessing/2024.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Chemical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Process Control',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/ProcessControl/2024.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'UNIT PROCESSES',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/Thermodynamics/2024.pdf' },
              ],
            },
            {
              name: 'NUMERICAL METHODS IN CHEMICAL ENGINEERING',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/MassTransfer/2024.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/ReactionEngineering/2024.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/FluidMechanics/2024.pdf' },
              ],
            },
            {
              name: 'ENGINEERING CHEMISTRY',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/HeatTransfer/2024.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              papers: [
                { year: '2024', url: 'https://example.com/Chemical/ProcessInstrumentation/2024.pdf' },
              ],
            },
          ]
        }
      },
    ];

    // Process question paper data to ensure all 8 semesters are present
    const questionPaperData = standardizeSemesters(rawQuestionPaperData, 'papers');

    const rawStudyMaterialData = [
      {
        department: 'Information Technology',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              materials: [
                { title: 'Module 1 Notes: Ecosystems', url: 'https://example.com/IT/EPM/notes1.pdf' },
                { title: 'Module 2 Notes: Pollution Types', url: 'https://example.com/IT/EPM/notes2.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              materials: [
                { title: 'Chapter 1: Basic Circuits', url: 'https://example.com/IT/FEEE/chap1.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              materials: [
                { title: 'Lecture 1: Introduction to C', url: 'https://example.com/IT/FCP/lec1.pdf' },
              ],
            },
            {
              name: 'CALCULUS',
              materials: [
                { title: 'Unit 1: Differential Calculus', url: 'https://example.com/IT/CALCULUS/unit1.pdf' },
              ],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              materials: [
                { title: 'Reading Material: Business Communication', url: 'https://example.com/IT/EPC/reading1.pdf' },
              ],
            },
            {
              name: 'ICT ESSENTIALS',
              materials: [
                { title: 'ICT Basics Handbook', url: 'https://example.com/IT/ICT/handbook.pdf' },
              ],
            },
            {
              name: 'WEB DESIGNING',
              materials: [
                { title: 'HTML & CSS Guide', url: 'https://example.com/IT/WD/guide.pdf' },
              ],
            },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              materials: [
                { title: 'Notes: Boolean Algebra', url: 'https://example.com/IT/DLD/notes_boolean.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF OBJECT ORIENTED PROGRAMMING',
              materials: [
                { title: 'OOP Concepts', url: 'https://example.com/IT/OOP/concepts.pdf' },
              ],
            },
            {
              name: 'PYTHON FOE ENGINEERS',
              materials: [
                { title: 'Python for Engineers Textbook', url: 'https://example.com/IT/PFE/textbook.pdf' },
              ],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              materials: [
                { title: 'Statistics Handbook', url: 'https://example.com/IT/SLA/stats_handbook.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              materials: [
                { title: 'Semiconductor Devices Theory', url: 'https://example.com/IT/FST/theory.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              materials: [
                { title: 'UHV Course Material', url: 'https://example.com/IT/UHV/course_material.pdf' },
              ],
            },
          ],
          'Semester-8': [ // Example for custom Semester-8 data
            {
              name: 'ADVANCED DATABASE MANAGEMENT SYSTEMS',
              materials: [
                { title: 'ADMS Study Guide', url: 'https://example.com/IT/ADMS/study_guide.pdf' },
              ],
            },
            {
              name: 'MACHINE LEARNING',
              materials: [
                { title: 'ML Algorithms Overview', url: 'https://example.com/IT/ML/algorithms.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Computer Science Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              materials: [
                { title: 'Module 1 Notes: Ecosystems', url: 'https://example.com/CSE/EPM/notes1.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              materials: [
                { title: 'Chapter 1: Basic Circuits', url: 'https://example.com/CSE/FEEE/chap1.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              materials: [
                { title: 'Lecture 1: Introduction to C', url: 'https://example.com/CSE/FCP/lec1.pdf' },
              ],
            },
            {
              name: 'CALCULUS',
              materials: [
                { title: 'Unit 1: Differential Calculus', url: 'https://example.com/CSE/CALCULUS/unit1.pdf' },
              ],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              materials: [
                { title: 'Reading Material: Business Communication', url: 'https://example.com/CSE/EPC/reading1.pdf' },
              ],
            },
            {
              name: 'ICT ESSENTIALS',
              materials: [
                { title: 'ICT Basics Handbook', url: 'https://example.com/CSE/ICT/handbook.pdf' },
              ],
            },
            {
              name: 'WEB DESIGNING',
              materials: [
                { title: 'HTML & CSS Guide', url: 'https://example.com/CSE/WD/guide.pdf' },
              ],
            },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              materials: [
                { title: 'Notes: Boolean Algebra', url: 'https://example.com/CSE/DLD/notes_boolean.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTALS OF OBJECT ORIENTED PROGRAMMING',
              materials: [
                { title: 'OOP Concepts', url: 'https://example.com/CSE/OOP/concepts.pdf' },
              ],
            },
            {
              name: 'PYTHON FOE ENGINEERS',
              materials: [
                { title: 'Python for Engineers Textbook', url: 'https://example.com/CSE/PFE/textbook.pdf' },
              ],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              materials: [
                { title: 'Statistics Handbook', url: 'https://example.com/CSE/SLA/stats_handbook.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              materials: [
                { title: 'Semiconductor Devices Theory', url: 'https://example.com/CSE/FST/theory.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              materials: [
                { title: 'UHV Course Material', url: 'https://example.com/CSE/UHV/course_material.pdf' },
              ],
            },
          ],
          'Semester-8': [
            {
              name: 'CLOUD COMPUTING',
              materials: [
                { title: 'Cloud Computing Essentials', url: 'https://example.com/CSE/CC/essentials.pdf' },
              ],
            },
            {
              name: 'BIG DATA ANALYTICS',
              materials: [
                { title: 'Big Data Techniques', url: 'https://example.com/CSE/BDA/techniques.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Mechanical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Thermodynamics',
              materials: [
                { title: 'Thermodynamics Lecture Notes', url: 'https://example.com/Mechanical/Thermodynamics/notes.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'APPLIED ELECTRICAL AND ELECTRONICS ENGINEERING',
              materials: [
                { title: 'AECE Handout', url: 'https://example.com/Mechanical/AECE/handout.pdf' },
              ],
            },
            {
              name: 'NUMERICAL METHODS AND COMPLEX VARIABLES',
              materials: [
                { title: 'NMCV Workbook', url: 'https://example.com/Mechanical/NMCV/workbook.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              materials: [
                { title: 'FCP Guide', url: 'https://example.com/Mechanical/FCP/guide.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              materials: [
                { title: 'EGD Manual', url: 'https://example.com/Mechanical/EGD/manual.pdf' },
              ],
            },
            {
              name: 'BASICS OF THERMODYNAMICS',
              materials: [
                { title: 'BoT Overview', url: 'https://example.com/Mechanical/BoT/overview.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              materials: [
                { title: 'UHV Workbook', url: 'https://example.com/Mechanical/UHV/workbook.pdf' },
              ],
            },
          ],
          'Semester-8': [
            {
              name: 'INDUSTRIAL AUTOMATION',
              materials: [
                { title: 'IA Systems', url: 'https://example.com/Mechanical/IA/systems.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Electrical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Circuit Theory',
              materials: [
                { title: 'Circuit Theory Notes', url: 'https://example.com/Electrical/CircuitTheory/notes.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'PHYSICS',
              materials: [
                { title: 'Physics for EE', url: 'https://example.com/Electrical/Physics/ee_physics.pdf' },
              ],
            },
            {
              name: 'APPLIED MATHEMATICS',
              materials: [
                { title: 'Applied Math Formulas', url: 'https://example.com/Electrical/AppliedMath/formulas.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              materials: [
                { title: 'FCP for EE', url: 'https://example.com/Electrical/FCP/ee_fcp.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              materials: [
                { title: 'EGD Concepts', url: 'https://example.com/Electrical/EGD/concepts.pdf' },
              ],
            },
            {
              name: 'BASIC ELECTRONICS',
              materials: [
                { title: 'Basic Electronics Intro', url: 'https://example.com/Electrical/BasicElectronics/intro.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              materials: [
                { title: 'UHV Ethical Values', url: 'https://example.com/Electrical/UHV/ethical_values.pdf' },
              ],
            },
          ],
          'Semester-8': [
            {
              name: 'RENEWABLE ENERGY SYSTEMS',
              materials: [
                { title: 'RES Technologies', url: 'https://example.com/Electrical/RES/technologies.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Chemical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Process Control',
              materials: [
                { title: 'Process Control Fundamentals', url: 'https://example.com/Chemical/ProcessControl/fundamentals.pdf' },
              ],
            }
          ],
          'Semester-2': [
            {
              name: 'UNIT PROCESSES',
              materials: [
                { title: 'Unit Processes Overview', url: 'https://example.com/Chemical/UnitProcesses/overview.pdf' },
              ],
            },
            {
              name: 'NUMERICAL METHODS IN CHEMICAL ENGINEERING',
              materials: [
                { title: 'NMCE Textbook', url: 'https://example.com/Chemical/NMCE/textbook.pdf' },
              ],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              materials: [
                { title: 'FCP for Chemical Engineers', url: 'https://example.com/Chemical/FCP/chem_fcp.pdf' },
              ],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              materials: [
                { title: 'EGD for Chemical Engineering', url: 'https://example.com/Chemical/EGD/chem_egd.pdf' },
              ],
            },
            {
              name: 'ENGINEERING CHEMISTRY',
              materials: [
                { title: 'Engineering Chemistry Notes', url: 'https://example.com/Chemical/EngChemistry/notes.pdf' },
              ],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              materials: [
                { title: 'UHV Principles', url: 'https://example.com/Chemical/UHV/principles.pdf' },
              ],
            },
          ],
          'Semester-8': [
            {
              name: 'BIOCHEMICAL ENGINEERING',
              materials: [
                { title: 'BCE Basics', url: 'https://example.com/Chemical/BCE/basics.pdf' },
              ],
            },
          ]
        }
      },
    ];
    const studyMaterialData = standardizeSemesters(rawStudyMaterialData, 'materials');

    // Department-specific Google Drive URLs for assignments
    const departmentAssignmentDriveFolders = {
        'IT Engineering': 'https://drive.google.com/drive/folders/1CLDGMMi_5lSANUfGewxLJIvZ2h7wGwBD?usp=sharing',
        'CS Engineering': 'https://drive.google.com/drive/folders/1iFxvrkfLfNOch3Z19jDOgy1FJExjL5DH?usp=sharing',
        'Mechanical Engineering': 'https://drive.google.com/drive/folders/1Mech_Assignments_Folder_ID?usp=sharing',
        'Electrical Engineering': 'https://drive.google.com/drive/folders/1Elect_Assignments_Folder_ID?usp=sharing',
        'Chemical Engineering': 'https://drive.google.com/drive/folders/1Chem_Assignments_Folder_ID?usp=sharing',
        // Add more departments and their respective Drive folder URLs here
    };


    // Function to generate 10 generic assignments (no longer used for "Assignments" section directly)
    function generateTenAssignments() {
      const assignments = [];
      for (let i = 1; i <= 10; i++) {
        assignments.push({ title: `Assignment ${i}`, url: `https://example.com/assignments/generic/assignment${i}.pdf` });
      }
      return assignments;
    }

    // Create assignmentsData based on rawQuestionPaperData structure (for subject names)
    // This data is still needed for 'assignmentsDataTemplate' structure consistency, even if not rendered the same way.
    const assignmentsDataTemplate = JSON.parse(JSON.stringify(rawQuestionPaperData));

    assignmentsDataTemplate.forEach(dept => {
      const newSemesters = {};
      for (let i = 1; i <= 8; i++) {
        const semesterKey = `Semester-${i}`;
        if (dept.semesters[semesterKey]) {
          newSemesters[semesterKey] = dept.semesters[semesterKey].map(subject => ({
            name: subject.name,
            // For Semester 1 and 2, always set isDynamicAssignmentSubject to true
            isDynamicAssignmentSubject: (i === 1 || i === 2) ? true : false,
            assignments: [] // Placeholder, dynamically generated if isDynamicAssignmentSubject is true
          }));
        } else {
          newSemesters[semesterKey] = [{
            name: 'No Data Available',
            isDynamicAssignmentSubject: false, // No dynamic assignments for empty semesters
            assignments: [{ title: 'No data added.', url: '#' }]
          }];
        }
      }
      dept.semesters = newSemesters;
    });

    const assignmentsData = assignmentsDataTemplate;

    // rawSyllabusData: Now completely independent and customizable for URLs
    const rawSyllabusData = [
      {
        department: 'Information Technology',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1e7mfV9D2uUkpg-UyvusgDxiNY4ZwiH_3/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1a39iEhr5y6YMCzx7n3ZJifsALdsD2_bV/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1IEOWGqNlRJ-ntAZKnHR4ntCLpXOpl6ny/view?usp=sharing' }],
            },
            {
              name: 'CALCULUS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1UPhhxeYZF6yhB0cZnIX2Ab0DICWT6X7V/view?usp=sharing' }],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/17ZI2GhVm4MZRSsVg5JUHFsqfmjzsH8G3/view?usp=sharing' }],
            },
            {
              name: 'ICT ESSENTIALS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1C5BVNh4OHBfih9ZxjGSB5WJt4utfecBs/view?usp=sharing' }],
            },
            {
              name: 'WEB DESIGNING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1EOQOG0s7OxG-QPr3vzdLPy7mbKpadNEv/view?usp=sharing' }],
            },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1mPxJ8IbG5CbxQVjawyZfIyhQEnvMBtUH/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTALS OF OBJECT ORIENTED PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1SUZaRozOBA_QQ6VP6OoeQiLGjSZWVCU_/view?usp=sharing' }],
            },
            {
              name: 'PYTHON FOE ENGINEERS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1ZluLzWOzSy1qUQvELjbSR1qqbwM-G5c0/view?usp=sharing' }],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1Q9M2kYOvpiN1K690NRCTOSdqRv_00sEQ/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1TnSp-cGLgt89N78tNYlMtV38MSpbA8cb/view?usp=sharing' }],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1T8zc66HSM55mXwLhAAwaVaK_qSuN-zEG/view?usp=sharing' }],
            },
          ],
          'Semester-3': [], // Example: empty semester, will be filled with 'No Data Available' by standardizeSemesters
          'Semester-4': [],
          'Semester-5': [],
          'Semester-6': [],
          'Semester-7': [],
          'Semester-8': [
            {
              name: 'ADVANCED DATABASE MANAGEMENT SYSTEMS',
              syllabus: [
                { title: 'Full Syllabus Document ADMS', url: 'https://example.com/IT/ADMS/syllabus.pdf' },
                { title: 'Module 1: Distributed Databases', url: 'https://example.com/IT/ADMS/module1.pdf' },
              ],
            },
            {
              name: 'MACHINE LEARNING',
              syllabus: [
                { title: 'Full Syllabus Document ML', url: 'https://example.com/IT/ML/syllabus.pdf' },
                { title: 'Module 1: Introduction to ML', url: 'https://example.com/IT/ML/module1.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Computer Science Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'ENVIRONMENTAL AND POLLUTION MANAGEMENT',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1e7mfV9D2uUkpg-UyvusgDxiNY4ZwiH_3/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTAL OF ELECTRICAL AND ELECTRONICS ENGINEERING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1a39iEhr5y6YMCzx7n3ZJifsALdsD2_bV/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTALS OF COMPUTER PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1IEOWGqNlRJ-ntAZKnHR4ntCLpXOpl6ny/view?usp=sharing' }],
            },
            {
              name: 'CALCULUS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1UPhhxeYZF6yhB0cZnIX2Ab0DICWT6X7V/view?usp=sharing' }],
            },
            {
              name: 'ENGLISH AND PROFESSIONAL COMMUNICATION',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/17ZI2GhVm4MZRSsVg5JUHFsqfmjzsH8G3/view?usp=sharing' }],
            },
            {
              name: 'ICT ESSENTIALS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1C5BVNh4OHBfih9ZxjGSB5WJt4utfecBs/view?usp=sharing' }],
            },
            {
              name: 'WEB DESIGNING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1EOQOG0s7OxG-QPr3vzdLPy7mbKpadNEv/view?usp=sharing' }],
            },
          ],
          'Semester-2': [
            {
              name: 'DIGITAL LOGIC DESIGN',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1mPxJ8IbG5CbxQVjawyZfIyhQEnvMBtUH/view?usp=sharing' }],
            },
            {
              name: 'OBJECT ORIENTED PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1elSR5A2YXgimoaYKPM--ZbNCDAUycJZJ/view?usp=sharing' }],
            },
            {
              name: 'PYTHON PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1G2Tn235sQw2n_LgE5xJP2pN8OxYMJE7i/view?usp=sharing' }],
            },
            {
              name: 'STATISTICS AND LINEAR ALGEBRA',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1Q9M2kYOvpiN1K690NRCTOSdqRv_00sEQ/view?usp=sharing' }],
            },
            {
              name: 'FUNDAMENTAL OF SEMICONDUCTOR TECHNOLOGY',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1TnSp-cGLgt89N78tNYlMtV38MSpbA8cb/view?usp=sharing' }],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://drive.google.com/file/d/1T8zc66HSM55mXwLhAAwaVaK_qSuN-zEG/view?usp=sharing' }],
            },
          ],
          'Semester-3': [],
          'Semester-4': [],
          'Semester-5': [],
          'Semester-6': [],
          'Semester-7': [],
          'Semester-8': [
            {
              name: 'CLOUD COMPUTING',
              syllabus: [
                { title: 'Full Syllabus Document CC', url: 'https://example.com/CSE/CC/syllabus.pdf' },
                { title: 'Module 1: Cloud Paradigms', url: 'https://example.com/CSE/CC/module1.pdf' },
              ],
            },
            {
              name: 'BIG DATA ANALYTICS',
              syllabus: [
                { title: 'Full Syllabus Document BDA', url: 'https://example.com/CSE/BDA/syllabus.pdf' },
                { title: 'Module 1: Hadoop Ecosystem', url: 'https://example.com/CSE/BDA/module1.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Mechanical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Thermodynamics',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/Thermodynamics/syllabus.pdf' }],
            }
          ],
          'Semester-2': [
            {
              name: 'APPLIED ELECTRICAL AND ELECTRONICS ENGINEERING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/AECE/syllabus.pdf' }],
            },
            {
              name: 'NUMERICAL METHODS AND COMPLEX VARIABLES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/NMCV/syllabus.pdf' }],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/FCP/syllabus.pdf' }],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/EGD/syllabus.pdf' }],
            },
            {
              name: 'BASICS OF THERMODYNAMICS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/BoT/syllabus.pdf' }],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Mechanical/UHV/syllabus.pdf' }],
            },
          ],
          'Semester-3': [],
          'Semester-4': [],
          'Semester-5': [],
          'Semester-6': [],
          'Semester-7': [],
          'Semester-8': [
            {
              name: 'INDUSTRIAL AUTOMATION',
              syllabus: [
                { title: 'Full Syllabus Document IA', url: 'https://example.com/Mechanical/IA/syllabus.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Electrical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Circuit Theory',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/CircuitTheory/syllabus.pdf' }],
            }
          ],
          'Semester-2': [
            {
              name: 'PHYSICS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/Physics/syllabus.pdf' }],
            },
            {
              name: 'APPLIED MATHEMATICS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/AppliedMath/syllabus.pdf' }],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/FCP/syllabus.pdf' }],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/EGD/syllabus.pdf' }],
            },
            {
              name: 'BASIC ELECTRONICS',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/BasicElectronics/syllabus.pdf' }],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Electrical/UHV/syllabus.pdf' }],
            },
          ],
          'Semester-3': [],
          'Semester-4': [],
          'Semester-5': [],
          'Semester-6': [],
          'Semester-7': [],
          'Semester-8': [
            {
              name: 'RENEWABLE ENERGY SYSTEMS',
              syllabus: [
                { title: 'Full Syllabus Document RES', url: 'https://example.com/Electrical/RES/syllabus.pdf' },
              ],
            },
          ]
        }
      },
      {
        department: 'Chemical Engineering',
        semesters: {
          'Semester-1': [
            {
              name: 'Process Control',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/ProcessControl/syllabus.pdf' }],
            }
          ],
          'Semester-2': [
            {
              name: 'UNIT PROCESSES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/UnitProcesses/syllabus.pdf' }],
            },
            {
              name: 'NUMERICAL METHODS IN CHEMICAL ENGINEERING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/NMCE/syllabus.pdf' }],
            },
            {
              name: 'FUNDAMENTAL OF COMPUTER PROGRAMMING',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/FCP/syllabus.pdf' }],
            },
            {
              name: 'ENGINEERING GRAPHICS AND DESIGN',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/EGD/syllabus.pdf' }],
            },
            {
              name: 'ENGINEERING CHEMISTRY',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/EngChemistry/syllabus.pdf' }],
            },
            {
              name: 'UNIVERSAL HUMAN VALUES',
              syllabus: [{ title: 'Full Syllabus Document', url: 'https://example.com/Chemical/UHV/syllabus.pdf' }],
            },
          ],
          'Semester-3': [],
          'Semester-4': [],
          'Semester-5': [],
          'Semester-6': [],
          'Semester-7': [],
          'Semester-8': [
            {
              name: 'BIOCHEMICAL ENGINEERING',
              syllabus: [
                { title: 'Full Syllabus Document BCE', url: 'https://example.com/Chemical/BCE/syllabus.pdf' },
              ],
            },
          ]
        }
      },
    ];

    const syllabusData = standardizeSemesters(rawSyllabusData, 'syllabus');


    const departmentSelect = document.getElementById('departmentSelect');
    const semesterButtonsContainer = document.getElementById('semesterButtonsContainer');
    const subjectsContainer = document.getElementById('subjectsContainer');
    const emptyMessage = document.getElementById('emptyMessage');
    const subjectSearch = document.getElementById('subjectSearch');
    const departmentAssignmentButtonsContainer = document.getElementById('departmentAssignmentButtonsContainer'); // New container

    const questionPapersBtn = document.getElementById('questionPapersBtn');
    const studyMaterialBtn = document.getElementById('studyMaterialBtn');
    const assignmentsBtn = document.getElementById('assignmentsBtn');
    const syllabusBtn = document.getElementById('syllabusBtn'); // New button


    let currentSection = 'syllabus'; // Default to syllabus
    let selectedDepartmentIndex = -1;
    let selectedSemester = '';
    let availableSemesters = []; // This will store semesters available for the current section and department

    function updateUIForSection() {
      // Deactivate all buttons
      document.querySelectorAll('.toggle-section-btn').forEach(button => {
        button.classList.remove('active');
      });

      // Activate the current section's button
      if (currentSection === 'questionPapers') {
        questionPapersBtn.classList.add('active');
      } else if (currentSection === 'studyMaterial') {
        studyMaterialBtn.classList.add('active');
      } else if (currentSection === 'assignments') {
        assignmentsBtn.classList.add('active');
      } else if (currentSection === 'syllabus') { // New section
        syllabusBtn.classList.add('active');
      }

      // Reset semester and subjects whenever section changes
      selectedSemester = '';
      departmentSelect.value = ''; // Reset department selection
      selectedDepartmentIndex = -1;
      subjectsContainer.innerHTML = ''; // Clear subjects
      semesterButtonsContainer.innerHTML = ''; // Clear semester buttons
      semesterButtonsContainer.style.display = 'none'; // Hide semester buttons
      subjectSearch.style.display = 'none';
      subjectSearch.value = '';
      document.getElementById('subjectSearchLabel').style.display = 'none'; // Hide search label

      // Handle visibility of department select and assignment buttons container based on section
      if (currentSection === 'assignments') {
          departmentSelect.style.display = 'none'; // Hide department dropdown for assignments
          document.getElementById('departmentSelectLabel').style.display = 'none'; // Hide department label
          emptyMessage.style.display = 'none'; // Hide empty message initially
          renderDepartmentAssignmentButtons(); // Render department buttons directly
      } else {
          departmentAssignmentButtonsContainer.style.display = 'none'; // Hide assignment buttons container
          departmentAssignmentButtonsContainer.innerHTML = ''; // Clear assignment buttons
          populateDepartments(); // Populate department dropdown as usual
          emptyMessage.style.display = 'block';
          emptyMessage.textContent = 'Please select a department.'; // Initial message for other sections
      }
    }

    function getActiveData() {
      if (currentSection === 'questionPapers') {
        return questionPaperData;
      } else if (currentSection === 'studyMaterial') {
        return studyMaterialData;
      } else if (currentSection === 'assignments') {
        // For assignments, we use a simple list of departments for the buttons
        return Object.keys(departmentAssignmentDriveFolders).map(dept => ({ department: dept }));
      } else if (currentSection === 'syllabus') { // New section
        return syllabusData;
      }
      return [];
    }

    function populateDepartments() {
      departmentSelect.innerHTML = '<option value="" disabled selected>Choose a department</option>';
      const data = getActiveData();
      const departments = [...new Set(data.map(item => item.department))];
      departments.forEach(department => {
        const option = document.createElement('option');
        option.value = department;
        option.textContent = department;
        departmentSelect.appendChild(option);
      });
      departmentSelect.style.display = 'block'; // Ensure department select is always visible
      document.getElementById('departmentSelectLabel').style.display = 'block';
    }

    // New function to render department-specific assignment buttons
    function renderDepartmentAssignmentButtons() {
        departmentAssignmentButtonsContainer.innerHTML = ''; // Clear existing buttons
        departmentAssignmentButtonsContainer.style.display = 'flex'; // Show container

        if (Object.keys(departmentAssignmentDriveFolders).length === 0) {
            emptyMessage.textContent = 'No assignment folders configured.';
            emptyMessage.style.display = 'block';
            return;
        }

        Object.keys(departmentAssignmentDriveFolders).forEach(departmentName => {
            const button = document.createElement('button');
            button.classList.add('department-assignment-btn');
            button.textContent = `View Assignments for ${departmentName}`;
            button.addEventListener('click', () => {
                const driveFolderUrl = departmentAssignmentDriveFolders[departmentName];
                window.open(driveFolderUrl, '_blank', 'noopener,noreferrer');
            });
            departmentAssignmentButtonsContainer.appendChild(button);
        });
        emptyMessage.style.display = 'none'; // Hide empty message if buttons are rendered
    }


    function populateSemesters(departmentIndex) {
      const data = getActiveData();
      const departmentData = data[departmentIndex];
      semesterButtonsContainer.innerHTML = '';
      semesterButtonsContainer.style.display = 'flex'; // Show container

      if (departmentData && departmentData.semesters) {
        // Sort semesters numerically
        availableSemesters = Object.keys(departmentData.semesters).sort((a, b) => {
          const semA = parseInt(a.replace('Semester-', ''));
          const semB = parseInt(b.replace('Semester-', ''));
          return semA - semB;
        });

        if (availableSemesters.length === 0) {
          semesterButtonsContainer.style.display = 'none';
          emptyMessage.style.display = 'block';
          emptyMessage.textContent = 'No semesters available for this department in this section.';
          subjectSearch.style.display = 'none';
          return;
        }

        availableSemesters.forEach(semester => {
          const button = document.createElement('button');
          button.classList.add('semester-btn');
          button.textContent = semester;
          button.dataset.semester = semester;
          button.addEventListener('click', () => {
            document.querySelectorAll('.semester-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            selectedSemester = semester;
            renderSubjects(departmentIndex, semester, subjectSearch.value);
            subjectSearch.style.display = 'block';
            document.getElementById('subjectSearchLabel').style.display = 'block';
          });
          semesterButtonsContainer.appendChild(button);
        });

        // DO NOT automatically select a semester: The user must click a semester button.
        emptyMessage.textContent = 'Please select a semester.'; // Set message to prompt semester selection
        emptyMessage.style.display = 'block';
      } else {
        semesterButtonsContainer.style.display = 'none';
        emptyMessage.style.display = 'block';
        emptyMessage.textContent = 'No data available for this department in this section.';
        subjectSearch.style.display = 'none';
      }
    }


    function renderSubjects(departmentIndex, semester, searchTerm = '') {
      const data = getActiveData();
      const departmentData = data[departmentIndex];
      subjectsContainer.innerHTML = '';
      emptyMessage.style.display = 'none'; // Hide general empty message when rendering subjects

      // For "Assignments" section, this function is not used to render subjects
      if (currentSection === 'assignments') {
          return;
      }

      // Check if there's any data for the selected department and semester
      if (!departmentData || !departmentData.semesters || !departmentData.semesters[semester]) {
        emptyMessage.textContent = `No data available for ${semester} in ${currentSection} for this department.`;
        emptyMessage.style.display = 'block';
        return;
      }

      const subjects = departmentData.semesters[semester];
      searchTerm = searchTerm.toLowerCase();

      // Filter subjects based on search term
      const filteredSubjects = subjects.filter(subject =>
        // Check if subject.name exists before calling toLowerCase
        (subject.name && subject.name.toLowerCase().includes(searchTerm)) ||
        // Always include the "No Data Available" subject if it's the only one for the semester
        (subject.name === 'No Data Available' && subjects.length === 1)
      );

      // If after filtering, no subjects are left or only the "No Data Available" subject remains
      if (filteredSubjects.length === 0 || (filteredSubjects.length === 1 && filteredSubjects[0].name === 'No Data Available')) {
        emptyMessage.textContent = `No subjects found matching "${searchTerm}" in ${semester}, or no data has been added for this semester.`;
        emptyMessage.style.display = 'block';
        return;
      }

      filteredSubjects.forEach(subject => {
        const subjectCard = document.createElement('div');
        subjectCard.classList.add('subject-card');
        subjectCard.setAttribute('tabindex', '0'); // Make card focusable

        const subjectTitle = document.createElement('h3');
        subjectTitle.classList.add('subject-title');
        subjectTitle.innerHTML = `<span class="material-icons subject-icon">book</span>${subject.name}`;
        subjectCard.appendChild(subjectTitle);

        const listContainer = document.createElement('div'); // Container for list

        const list = document.createElement('ul');
        list.classList.add('papers-list');

        let items;
        if (currentSection === 'questionPapers') {
            items = subject.papers;
        } else if (currentSection === 'studyMaterial') {
            items = subject.materials;
        } else if (currentSection === 'syllabus') {
            items = subject.syllabus;
        }

        if (items && items.length > 0 && !(items.length === 1 && items[0].title === 'No data added.' && items[0].url === '#')) {
          items.forEach(item => {
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = item.url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.innerHTML = `<span class="material-icons link-icon">link</span>${item.year || item.title}`;
            listItem.appendChild(link);
            list.appendChild(listItem);
          });
        } else {
            const listItem = document.createElement('li');
            listItem.textContent = 'No data added.';
            listItem.style.color = '#78716c';
            listItem.style.fontStyle = 'italic';
            list.appendChild(listItem);
        }
        listContainer.appendChild(list);
        
        subjectCard.appendChild(listContainer);
        subjectsContainer.appendChild(subjectCard);
      });
    }

    // Event Listeners for department and semester selection
    departmentSelect.addEventListener('change', (e) => {
      selectedDepartmentIndex = getActiveData().findIndex(dept => dept.department === e.target.value);
      selectedSemester = ''; // Reset selected semester
      populateSemesters(selectedDepartmentIndex);
      // Clear subjects container and display message to select semester
      subjectsContainer.innerHTML = '';
      emptyMessage.style.display = 'block';
      emptyMessage.textContent = 'Please select a semester.';
      subjectSearch.style.display = 'none'; // Hide search bar until semester is selected
      subjectSearch.value = ''; // Clear search bar
    });

    subjectSearch.addEventListener('input', (e) => {
      if (selectedDepartmentIndex !== -1 && selectedSemester) {
        renderSubjects(selectedDepartmentIndex, selectedSemester, e.target.value);
      }
    });

    // Event Listeners for section toggle buttons
    syllabusBtn.addEventListener('click', () => {
      if (currentSection !== 'syllabus') {
        currentSection = 'syllabus';
        updateUIForSection();
      }
    });

    questionPapersBtn.addEventListener('click', () => {
      if (currentSection !== 'questionPapers') {
        currentSection = 'questionPapers';
        updateUIForSection();
        // Repopulate departments will be called inside updateUIForSection()
      }
    });

    studyMaterialBtn.addEventListener('click', () => {
      if (currentSection !== 'studyMaterial') {
        currentSection = 'studyMaterial';
        updateUIForSection();
        // Repopulate departments will be called inside updateUIForSection()
      }
    });

    assignmentsBtn.addEventListener('click', () => {
      if (currentSection !== 'assignments') {
        currentSection = 'assignments';
        updateUIForSection();
        // Repopulate departments will be called inside updateUIForSection()
      }
    });


    // Initialization
    function init() {
      updateUIForSection(); // Set initial UI state
    }

    init();
  </script>
</body>
</html>
